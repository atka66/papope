[gd_scene load_steps=19 format=3 uid="uid://tlfkm8pk6hy7"]

[ext_resource type="Script" path="res://objects/game/Player.gd" id="1_srq66"]
[ext_resource type="Shader" path="res://shaders/circle.gdshader" id="2_uodpr"]
[ext_resource type="Texture2D" uid="uid://v68toutk1e4s" path="res://sprites/game/player/players.png" id="3_gq6vx"]
[ext_resource type="Texture2D" uid="uid://m1y325q5dmor" path="res://sprites/game/player/crown.png" id="4_ep5y4"]
[ext_resource type="Texture2D" uid="uid://c3u5ie7th23lt" path="res://sprites/game/player/lock.png" id="5_83h66"]
[ext_resource type="Shader" path="res://shaders/shine.gdshader" id="6_ii0ia"]
[ext_resource type="Shader" path="res://shaders/outline.gdshader" id="7_gom1r"]
[ext_resource type="AudioStream" uid="uid://chl7pwr2aquq0" path="res://audio/sfx/pwrup/shield_start.ogg" id="8_eksu2"]
[ext_resource type="AudioStream" uid="uid://buth7w23vc0am" path="res://audio/sfx/pwrup/shield_end.ogg" id="9_0h1ux"]
[ext_resource type="AudioStream" uid="uid://cn7iqp0v80dvw" path="res://audio/sfx/pwrup/rev_hit.ogg" id="10_0o6vg"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_po7vx"]
friction = 0.0
bounce = 1.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_qd1a5"]
shader = ExtResource("2_uodpr")
shader_parameter/width = 0.45
shader_parameter/border_color = Color(0, 0, 0, 1)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_finae"]
shader = ExtResource("2_uodpr")
shader_parameter/width = 0.43
shader_parameter/border_color = Color(1, 1, 1, 1)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_1xui3"]
shader = ExtResource("6_ii0ia")

[sub_resource type="CircleShape2D" id="CircleShape2D_bxsms"]
radius = 16.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_417ft"]
shader = ExtResource("7_gom1r")
shader_parameter/line_thickness = 1.0
shader_parameter/line_color = Color(0, 0, 0, 1)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_r5u8j"]
shader = ExtResource("7_gom1r")
shader_parameter/line_thickness = 1.0
shader_parameter/line_color = Color(0, 0, 0, 1)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_w500e"]
shader = ExtResource("7_gom1r")
shader_parameter/line_thickness = 1.0
shader_parameter/line_color = Color(0, 0, 0, 1)

[node name="Player" type="RigidBody2D" groups=["players", "shootables", "trappables"]]
collision_mask = 3
physics_material_override = SubResource("PhysicsMaterial_po7vx")
gravity_scale = 0.0
max_contacts_reported = 2
contact_monitor = true
lock_rotation = true
script = ExtResource("1_srq66")

[node name="BodyParts" type="CanvasGroup" parent="."]
material = SubResource("ShaderMaterial_qd1a5")
fit_margin = 0.0
clear_margin = 0.0

[node name="Body" type="ColorRect" parent="BodyParts"]
offset_left = -16.0
offset_top = -16.0
offset_right = 16.0
offset_bottom = 16.0

[node name="Face" type="Sprite2D" parent="BodyParts"]
texture = ExtResource("3_gq6vx")
hframes = 7

[node name="Lock" type="Sprite2D" parent="."]
texture = ExtResource("5_83h66")

[node name="Timer" type="Timer" parent="Lock"]
one_shot = true

[node name="Crown" type="Sprite2D" parent="."]
position = Vector2(0, -18)
texture = ExtResource("4_ep5y4")

[node name="Shield" type="Node2D" parent="."]

[node name="Timer" type="Timer" parent="Shield"]
one_shot = true

[node name="Circle" type="ColorRect" parent="Shield"]
material = SubResource("ShaderMaterial_finae")
offset_left = -16.0
offset_top = -16.0
offset_right = 16.0
offset_bottom = 16.0

[node name="Shine" type="ColorRect" parent="Shield"]
material = SubResource("ShaderMaterial_1xui3")
offset_left = -16.0
offset_top = -16.0
offset_right = 16.0
offset_bottom = 16.0

[node name="CollisionShape" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_bxsms")

[node name="Crosshairs" type="Node2D" parent="."]

[node name="DynamiteCrosshair" type="CanvasGroup" parent="Crosshairs"]
material = SubResource("ShaderMaterial_417ft")

[node name="Center" type="Polygon2D" parent="Crosshairs/DynamiteCrosshair"]
polygon = PackedVector2Array(-1, -1, 1, -1, 1, 1, -1, 1)

[node name="Top" type="Polygon2D" parent="Crosshairs/DynamiteCrosshair"]
polygon = PackedVector2Array(-1, -12, 1, -12, 1, -4, -1, -4)

[node name="Bottom" type="Polygon2D" parent="Crosshairs/DynamiteCrosshair"]
polygon = PackedVector2Array(-1, 4, 1, 4, 1, 12, -1, 12)

[node name="RevolverCrosshair" type="CanvasGroup" parent="Crosshairs"]
material = SubResource("ShaderMaterial_r5u8j")

[node name="Circle" type="Polygon2D" parent="Crosshairs/RevolverCrosshair"]
polygon = PackedVector2Array(10, 0, 9.00969, 4.33884, 6.2349, 7.81832, 2.22521, 9.74928, -2.22521, 9.74928, -6.2349, 7.81831, -9.00969, 4.33884, -10, -1.66893e-06, -9.00969, -4.33884, -6.2349, -7.81832, -2.22521, -9.74928, 2.22521, -9.74928, 6.2349, -7.81831, 9.00969, -4.33883, 10, 3.09944e-06, 8, 0, 7.20775, -3.47107, 4.98792, -6.25465, 1.78017, -7.79942, -1.78017, -7.79942, -4.98792, -6.25465, -7.20775, -3.47107, -8, 1.43051e-06, -7.20775, 3.47107, -4.98792, 6.25465, -1.78017, 7.79942, 1.78017, 7.79942, 4.98792, 6.25465, 7.20775, 3.47107, 8, 0)

[node name="Top" type="Polygon2D" parent="Crosshairs/RevolverCrosshair"]
polygon = PackedVector2Array(-1, -12, 1, -12, 1, -5, -1, -5)

[node name="Bottom" type="Polygon2D" parent="Crosshairs/RevolverCrosshair"]
polygon = PackedVector2Array(-1, 12, 1, 12, 1, 5, -1, 5)

[node name="Left" type="Polygon2D" parent="Crosshairs/RevolverCrosshair"]
polygon = PackedVector2Array(-12, 1, -5, 1, -5, -1, -12, -1)

[node name="Right" type="Polygon2D" parent="Crosshairs/RevolverCrosshair"]
polygon = PackedVector2Array(12, 1, 5, 1, 5, -1, 12, -1)

[node name="WhipCrosshair" type="CanvasGroup" parent="Crosshairs"]
material = SubResource("ShaderMaterial_w500e")

[node name="Center" type="Polygon2D" parent="Crosshairs/WhipCrosshair"]
polygon = PackedVector2Array(-1, -1, 1, -1, 1, 1, -1, 1)

[node name="TopLeft" type="Polygon2D" parent="Crosshairs/WhipCrosshair"]
polygon = PackedVector2Array(-9, -7.5, -7.5, -9, -3, -4.5, -4.5, -3)

[node name="TopRight" type="Polygon2D" parent="Crosshairs/WhipCrosshair"]
polygon = PackedVector2Array(9, -7.5, 7.5, -9, 3, -4.5, 4.5, -3)

[node name="BottomLeft" type="Polygon2D" parent="Crosshairs/WhipCrosshair"]
polygon = PackedVector2Array(-9, 7.5, -7.5, 9, -3, 4.5, -4.5, 3)

[node name="BottomRight" type="Polygon2D" parent="Crosshairs/WhipCrosshair"]
polygon = PackedVector2Array(9, 7.5, 7.5, 9, 3, 4.5, 4.5, 3)

[node name="HitScan" type="RayCast2D" parent="."]
collision_mask = 3

[node name="AudioDash" type="AudioStreamPlayer2D" parent="."]
bus = &"sfx"

[node name="AudioShieldStart" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("8_eksu2")
bus = &"sfx"

[node name="AudioShieldEnd" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("9_0h1ux")
bus = &"sfx"

[node name="AudioRevolverHit" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("10_0o6vg")
bus = &"sfx"

[connection signal="body_entered" from="." to="." method="_on_body_entered"]
[connection signal="body_exited" from="." to="." method="_on_body_exited"]
[connection signal="timeout" from="Lock/Timer" to="." method="untrap"]
[connection signal="timeout" from="Shield/Timer" to="." method="unshield"]
